<!doctype html>
<html lang="en" data-bs-theme="auto">
<head>
<meta charset="utf-8">
<title>Curator Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
<link rel="stylesheet" href="styles.css">
<link rel="stylesheet" href="dashboard-styles.css">
</head>
<body class="container py-4">
  <!-- Skip link for keyboard users -->
  <a href="#main-content" class="visually-hidden-focusable">Skip to main content</a>
  <div class="d-flex align-items-center border-bottom pb-2 mb-4">
    <h1 class="h3 mb-0 flex-grow-1">
      <i class="bi bi-collection me-2" aria-hidden="true"></i>Curator Pathways
    </h1>
    <div class="d-flex gap-3 align-items-center">
      <button id="theme-toggle" class="btn btn-sm btn-outline-secondary" title="Toggle Dark Mode" aria-label="Toggle Dark Mode">
        <i class="bi bi-moon-stars-fill" aria-hidden="true"></i>
      </button>
      <a href="github-settings.html" class="text-decoration-none text-muted small">
        <i class="bi bi-github" aria-hidden="true"></i> GitHub Settings
      </a>
      <a href="https://github.com/PSA-Corporate-Learning-Branch/curator-extension" target="_blank" class="text-decoration-none text-muted small" rel="noopener">
        <i class="bi bi-question-circle" aria-hidden="true"></i> Help
      </a>
    </div>
  </div>
  
  <!-- Tab navigation -->
  <ul class="nav nav-tabs mb-4">
    <li class="nav-item">
      <a class="nav-link active" href="dashboard.html" aria-current="page">
        <i class="bi bi-grid me-1" aria-hidden="true"></i>Dashboard
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="link-audit.html">
        <i class="bi bi-link-45deg me-1" aria-hidden="true"></i>Audit
      </a>
    </li>
  </ul>
  
  <div class="d-flex mb-4 gap-2 justify-content-between">
    <div>
      <button id="addPathway" class="btn btn-primary">
        <i class="bi bi-plus-lg" aria-hidden="true"></i> New Pathway
      </button>
    </div>
    <div class="btn-group">
      <button id="commitToGithub" class="btn btn-outline-primary" title="Save changes to GitHub repository">
        <i class="bi bi-github" aria-hidden="true"></i> Commit to GitHub
      </button>
      <button id="importFromGithub" class="btn btn-outline-primary" title="Import data from GitHub repository">
        <i class="bi bi-github" aria-hidden="true"></i> Import from GitHub
      </button>
      <button id="exportJson" class="btn btn-outline-secondary">
        <i class="bi bi-download" aria-hidden="true"></i> Export All
      </button>
      <button id="importJson" class="btn btn-outline-secondary">
        <i class="bi bi-upload" aria-hidden="true"></i> Import
      </button>
    </div>
  </div>
  
  <input type="file" id="fileInput" accept=".json" class="hidden-file-input" aria-label="Import JSON file">
  
  <div id="emptyState" class="text-center py-5 d-none">
    <div class="display-6 text-muted mb-3">
      <i class="bi bi-folder-plus" aria-hidden="true"></i>
    </div>
    <h2 class="h4 mb-3">No pathways yet</h2>
    <p class="text-muted mb-4">Create your first pathway to get started organizing your bookmarks.</p>
    <button id="emptyStateBtn" class="btn btn-primary">
      <i class="bi bi-plus-lg" aria-hidden="true"></i> Create Pathway
    </button>
  </div>
  
  <ul id="pathwayList" class="list-unstyled" role="list" aria-label="Pathways" id="main-content"></ul>
  
  <script src="sortable.min.js"></script>
  <script src="bootstrap.bundle.min.js"></script>
  <script src="chrome-polyfill-sync.js"></script>
  <script type="module" src="chrome-storage-ready.js"></script>
  <script>
    // Override navigation for web app mode - must be before dashboard.js loads
    function createNewPathway() {
      window.location.href = 'edit-pathway.html';
    }
    
    // Override pathway navigation functions
    function viewPathway(idx) {
      window.location.href = `pathway-detail.html?id=${idx}`;
    }
    
    function editPathway(idx) {
      window.location.href = `edit-pathway.html?id=${idx}`;
    }
    
    // Make these available globally before dashboard.js loads
    window.createNewPathway = createNewPathway;
    window.viewPathway = viewPathway;
    window.editPathway = editPathway;
  </script>
  <script type="module" src="dashboard.js"></script>
  <script src="accessibility-fixes.js"></script>
</body>
</html>